@using MudBlazor
@inject ILibroService LibroService
@using Proyecto2.Frontend.Services

@inject ISnackbar Snackbar
@using Proyecto2.Frontend.Models

<MudPaper>
    <MudForm @ref="_form" Model="_libro">

        <MudButton OnClick="SubmitForm">Guardar</MudButton>
    </MudForm>
</MudPaper>

@code {

    private MudForm _form;
    private LibroDto _libro = new();

    private async Task SubmitForm()
    {
        await _form.Validate();

        if (_form.IsValid)
        {
            var creado = await LibroService.CrearAsync(_libro);

            if (creado)
            {
                Snackbar.Add("Libro registrado exitosamente", Severity.Success);
                _libro = new(); 
            }
            else
            {
                Snackbar.Add("Error al registrar libro", Severity.Error);
            }

        }
    }

    
    
}
